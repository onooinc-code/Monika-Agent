{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Monica Conversation State",
  "description": "Defines the structure for the persistent state of a development session with the Monica AI.",
  "type": "object",
  "properties": {
    "project_name": {
      "type": "string",
      "description": "The name of the project being worked on."
    },
    "current_session_start": {
      "type": "string",
      "format": "date-time",
      "description": "The ISO 8601 timestamp of when the current session started."
    },
    "current_task": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "description": { "type": "string" },
        "status": { "enum": ["planning", "implementing", "testing", "completed"] }
      },
      "required": ["id", "description", "status"]
    },
    "topics_discussed": {
      "type": "array",
      "items": { "type": "string" }
    },
    "errors_found": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": { "type": "string", "format": "date-time" },
          "error_message": { "type": "string" },
          "status": { "enum": ["reported", "fixed", "pending"] }
        },
        "required": ["timestamp", "error_message", "status"]
      }
    },
    "features_implemented": {
      "type": "array",
      "items": { "type": "string" }
    },
    "messages": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "sender": { "enum": ["user", "ai"] },
          "timestamp": { "type": "string", "format": "date-time" },
          "full_text": { "type": "string" },
          "summary": { "type": "string" }
        },
        "required": ["sender", "timestamp", "summary"]
      }
    }
  },
  "required": ["project_name", "messages"]
}